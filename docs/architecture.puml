@startuml WYOS Architecture

' Styling
skinparam componentStyle rectangle
skinparam packageStyle rectangle
skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam arrowColor #666666
skinparam componentBackgroundColor #FFFFFF
skinparam packageBackgroundColor #FFFFFF
skinparam stereotypeCBackgroundColor #A9DCDF

' Title
title WYOS - Next.js 15 Application Architecture

' Components
package "Frontend (Next.js 15)" {
  package "App Router" {
    [Marketing Routes] as marketing #LightBlue
    note right: Public pages\n/(marketing)/*
    
    [Auth Routes] as auth #LightYellow
    note right: Authentication flows\n/(auth)/*
    
    [Core Routes] as core #LightGreen
    note right: Protected features\n/(core)/*
    
    [Subscription Routes] as subscription #LightPink
    note right: Subscription management\n/(subscription)/*
  }

  package "Components" {
    [UI Components] as ui #White
    note right: shadcn/ui base components
    
    [Shared Components] as shared
    note right: Cross-cutting components
    
    [Feature Components] as features
    note right: Feature-specific components
  }

  package "State Management" {
    [Zustand Stores] as zustand #LightGrey
    note right: Client-side state
    
    [TanStack Query] as query #LightGrey
    note right: Server-state management
  }

  package "Data Access" {
    [Repositories] as repos
    note right: Base repository pattern
    
    [Services] as services
    note right: Business logic layer
  }
}

package "Backend Services" {
  [Appwrite] as appwrite #LightBlue
  note right: Auth & Database
  
  [Stripe] as stripe #LightGreen
  note right: Payment processing
}

' Relationships
marketing --> ui
auth --> ui
core --> ui
subscription --> ui

marketing --> shared
auth --> shared
core --> shared
subscription --> shared

features --> ui
features --> shared

zustand --> features
query --> features

features --> services
services --> repos
repos --> appwrite

subscription --> stripe

' Middleware & Protection
[Auth Middleware] as middleware #Orange
middleware --> auth
middleware --> core
middleware --> subscription

' Layout System
[Root Layout] as layout #Purple
layout --> marketing
layout --> auth
layout --> core
layout --> subscription

' Legend
legend right
  |Color|Component Type|
  |<#LightBlue>|Public Routes|
  |<#LightYellow>|Auth Routes|
  |<#LightGreen>|Protected Routes|
  |<#LightPink>|Subscription Routes|
  |<#Orange>|Middleware|
  |<#Purple>|Layout System|
  |<#LightGrey>|State Management|
  |<#White>|UI Components|
endlegend

@enduml
